---
title: 23년 ~4월 1주차 주간 회고
date: 2023-04-10

categories:
  - Retrospective
  - Weekly
tags:
  - DSP
  - pywinauto
  - WSL
  - Tensorflow
  - PyTorch

---

할일도, 할것도 너무 많고 캡스톤때문에 너무 바빴다.  
약 2주간의 주간회고를 몰아서 작성.

### 1. RythmStudy
DSP 강의가 끝나고 DeepLearningForAudio를 시작했다.  
텐서플로우보다는 토치가 좀 더 사용할 일이 많을꺼 같아, 해당 스터디 초반부에 토치를 공부했지만  
해당 강의에서는 텐서플로를 쓴다...  
그리고 그냥 기본적인 딥러닝 개념을 소개하는 느낌이라, 빠른 시간안에 끝날꺼 같다.  
해당 강의가 끝나고나면 처음 계획했던 튜토리얼들을 모두 보게되는데, 이후 어떤 방식으로 스터디를 운영 할 지 고민해볼 필요가 있다.  
스터디 설립 목적에 맞게 오디오 관련된 프로젝트나 필사들을 진행하지 않을까 싶다.  

### 2. Pywinauto
몇주간 해결하려고 한, 화면이 나오지 않는 상태에서 자동화하기는 실패했다.  
완전히 실패한거는 아니고, 내가 가지고 있는 테스트에 대해서만 실패했다.  
기본적으로, 화면이 연결되어 있지 않은 상태에서도 요소의 정보는 가지고 올 수 있다는 점을 확인했다.  
해당 요소의 좌표까지 가져 올 수 있는데, 화면이 연결되어 있지 않은 상태에서는 해당 좌표로 이동해 요소를 클릭하는게 불가능 했다.  
리눅스 환경에서는 가상 디스플레이를 생성해 로직에 추가하면 정상적으로 수행될 수 있다는 것을 확인했지만,  
윈도우 환경을 사용하고 있어서 적용할 수는 없었다.  
하지만,  
```python
try: 요소.click()
except:
  try: 요소.click_input()
  except: 요소.send_keystrokes("{ENTER}")
```
와 같이, 최종적으로 요소 위에서 엔터를 누르는 경우에는 화면이 없는 상태에서 클릭과 같은 효과를 낼 수 있다.  
다만, 드물게 클릭하고자하는 요소에 커서를 두고 엔터를 눌렀을 때 상호작용이 없는 프로그램들이 있는데, 이런 프로그램에 대해서는 제어가 불가능했다.  
신기하게도 내가 제어해야하는 프로그램이 딱 저래서 화면이 없는 상태에서 제어하는 것을 실패했다.  
어쩔 수 없이, 가상 환경을 로컬에서 강제로 연결하는 방식으로 구현했는데 모종의 이유로 해당 프로젝트가 중단된 상황이다.

### 3. Tensorflow GPU 메모리
텐서와 토치가 모두 깔려있는 환경을 사용하고 있었는데, 토치를 이용해 훈련을 진행 할 때 GPU 메모리 전체를 사용하지 못하는 문제점을 발견했다.  
찾아보다보니, 텐서가 메모리 단편화를 진행하면서 메모리를 잡고 반환하지 않는다는 사실을 알게 되었는데,  
```python
from numba import cuda

cuda.close()
```
를 사전에 추가하면 GPU 메모리가 반환되는거 같다.  
해당 부분은 실제로 테스트해보지 못했는데, 다음번에 유사한 문제가 있으면 시도해봐야겠다.  

### 4. WSL
최근 윈도우를 아예 초기화 시켰다.  
잘 사용하고 있었는데 몇가지 문제때문에 그냥 밀어버렸다.  
밀고나서 다시 개발 환경을 설정했는데, WSL을 본격적으로 사용하면서 TF를 WSL로 2.12 버전을 깔았다.  
WSL에서 CUDA 잡는거 때문에 생각보다 시간을 많이 사용했는데 작동은 정상적으로 된다.  
다만, numa 관련된 문제에 봉착했는데 새벽에 해결하려다가 일단은 보류 중이다. 해당 문제도 해결해야지..   

### 5. Capston
YOLOv5l을 1주일간 파인튜닝해서 감정 추정 모델을 생성했다.  
mAP50:90 / mAP95:80 정도 나오는데, 쓸만하기만하고 기대했던 드라마틱한 효과는 없는거 같다.  
좀 더 학습 시키면 개선이 있을꺼 같긴한데 엄두가 안난다..  
일단은 다음 스텝이 있어서 최종적으로 추가 학습이 필요하다고 판단이되면 더 학습 시켜야겠다.
